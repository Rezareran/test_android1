<!DOCTYPE html>

<html>
    
  <head>
    <title>Download Example</title>
    
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1" />
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery.min.js"></script>
    <style>
        
        
        
    </style>
      
    <script type="text/javascript">
         
        var downloadDirectory;
        
        document.addEventListener("deviceready",onDeviceReady,true);
        
        function onDeviceReady(){
            window.requestFileSystem(LocalFileSystem.PERSISTENT,0,onFileSystemSuccess,null);
            
                $("#download_btn").on('click',function(e){
                    download();
                });
            
        }
        
        function onFileSystemSuccess(fileSystem){
            fileSystem.root.getDirectory('my_downloads',
                                         {create: true},
                                         function(dir){
                                            downloadDirectory = dir;
                                         },onError)
        }
        
        function download(){
            var fileURL = document.getElementById('file_url').value;
            var localFileName = getFilename(fileURL);
            $('#message').html('Downloading ' + localFileName);
            var fileTransfer = new FileTransfer();
            fileTransfer.download(
                fileURL,
                downloadDirectory.fullPath + '/' + localFileName,
                function(entry){
                    $('#message').html('Download Complete. File saved to: ' +
                                       entry.fullPath);
                },
                function(error){
                    alert('Download error source ' + JSON.stringify(error));
                }
            );
        }
        
        function getFilename(url){
            if(url){
                var m = url.toString().match(/.*\/(.+?)\./);
                if (m && m.length > 1){
                    return m[1] + '.' + url.split('.').pop();
                }
            }
            return "";
            
        }
        
        function onError(error){
            $('#message').html(
                'Problem: ' + error.code);
        }
        
    </script>
      
  </head>
    
  <body>
      
      <input type="text" id="file_url" value="" />
      <input type="button" id="download_btn" value="Download" />
      <div id="message"></div>
      
  </body>
    
</html>